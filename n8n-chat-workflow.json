{
  "name": "SEMHYS Chat Classification Workflow",
  "nodes": [
    {
      "parameters": {
        "path": "semhys-chat",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-chat",
      "name": "Chat Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [240, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true
          },
          "conditions": [
            {
              "id": "technical-keywords",
              "leftValue": "={{ $json.message.toLowerCase() }}",
              "rightValue": "bomba|presi√≥n|caudal|sistema|hidr√°ulico|el√©ctrico|motor|v√°lvula|rci|automatizaci√≥n",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        }
      },
      "id": "classify-message",
      "name": "Classify Message",
      "type": "n8n-nodes-base.if",
      "position": [460, 300]
    },
    {
      "parameters": {
        "subject": "üîß Consulta T√©cnica SEMHYS",
        "message": "Nueva consulta t√©cnica recibida:\n\nMensaje: {{ $json.message }}\nCategor√≠a: T√©cnica\nTimestamp: {{ $json.timestamp }}",
        "toEmail": "contact@semhys.com"
      },
      "id": "technical-email",
      "name": "Technical Email",
      "type": "n8n-nodes-base.emailSend", 
      "position": [680, 200]
    },
    {
      "parameters": {
        "subject": "üí¨ Consulta General SEMHYS",
        "message": "Nueva consulta general recibida:\n\nMensaje: {{ $json.message }}\nCategor√≠a: General\nTimestamp: {{ $json.timestamp }}",
        "toEmail": "contact@semhys.com"
      },
      "id": "general-email",
      "name": "General Email", 
      "type": "n8n-nodes-base.emailSend",
      "position": [680, 400]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "{ \"status\": \"success\", \"category\": \"{{ $json.category }}\", \"message\": \"Consulta procesada correctamente\" }"
      },
      "id": "response",
      "name": "Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "position": [900, 300]
    }
  ],
  "connections": {
    "Chat Webhook": {
      "main": [
        [
          {
            "node": "Classify Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Classify Message": {
      "main": [
        [
          {
            "node": "Technical Email",
            "type": "main", 
            "index": 0
          }
        ],
        [
          {
            "node": "General Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Technical Email": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "General Email": {
      "main": [
        [
          {
            "node": "Response", 
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}